<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head>
    <meta charset="UTF-8">
    <title>Panel de Usuario</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style-user.css}">
</head>

<body>

    <h2 th:text="'Bienvenido ' + ${email}">Bienvenido Usuario</h2>

    <div class="subscription-status">
        <p
            th:if="${subscription == null or subscription.endSubscription == null or subscription.endSubscription.isBefore(T(java.time.LocalDateTime).now())}">
            No posee subscripción activa.
        </p>
        <p
            th:if="${subscription != null and subscription.endSubscription != null and subscription.endSubscription.isAfter(T(java.time.LocalDateTime).now())}">
            Su subscripción expira el
            <strong th:text="${#temporals.format(subscription.endSubscription, 'dd-MM-yyyy HH:mm')}">fecha</strong>.
        </p>
    </div>

    <div class="buttons">
        <form action="/configureProfile" method="get">
            <button type="submit">Configurar perfil</button>
        </form>

        <form action="/goToBuySubscription" method="get">
            <button type="submit">Comprar Subscripción</button>
        </form>

        <form action="/chooseCategoriesPage" method="get">
            <button type="submit">Escoger Categorías</button>
        </form>

        <form action="/seeAllBils" method="get">
            <button type="submit">Ver Facturas</button>
        </form>

        <a th:href="@{/logout}">
            <button>Salir</button>
        </a>
    </div>

    <h3>Noticias Recomendadas</h3>

    <div th:each="news : ${news}">
        <div class="news-item">
            <div class="news-title" th:text="${news.title}">Título</div>
            <div class="news-meta">
                <span>Autor: <span th:text="${news.author}">Autor</span></span>
                <span class="badge" th:text="${news.category}">Categoría</span>
            </div>
            <p th:text="${news.content}">Contenido</p>
        </div>
    </div>

</body>

</html>